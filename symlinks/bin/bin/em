#!/bin/sh
#
# This is a convenience wrapper to launch or reuse an Emacs instance to open a
# given file. It returns immediately, so can't be used as an $EDITOR.
set -o errexit -o nounset

if ! pgrep -q -- "Emacs"; then
    open -a Emacs "$@"
    echo "Waiting for Emacs to start..."
elif [ $# -eq 0 ]; then
    open -a Emacs
else
    emacsclient --no-wait "$@"
fi
